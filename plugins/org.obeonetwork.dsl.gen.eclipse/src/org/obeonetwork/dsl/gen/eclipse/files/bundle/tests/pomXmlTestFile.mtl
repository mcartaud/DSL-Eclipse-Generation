[comment encoding = UTF-8 /]
[module pomXmlTestFile('http://www.obeonetwork.org/dsl/eclipse')]

[import org::obeonetwork::dsl::gen::eclipse::common::normalizeName /]

[template private pomXmlTestFile(aBundle : Bundle)]
[aBundle.genBundleTestPath()/]/pom.xml
[/template]

[template public genPomXmlTestFile(aBundle : Bundle)]
[file (aBundle.pomXmlTestFile(), false, 'UTF-8')]
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.obeonetwork.acceleo</groupId>
    <artifactId>[aBundle.ancestors(Application).genApplicationID()/].parent</artifactId>
    <version>[aBundle.eContainer(Application).applicationVersion().substitute('.qualifier', '')/]-SNAPSHOT</version>
    <relativePath>../..</relativePath>
  </parent>

  <artifactId>[aBundle.genBundleID()/].tests</artifactId>
  <version>[aBundle.bundleVersion().substitute('.qualifier', '')/]-SNAPSHOT</version>
  <packaging>eclipse-test-plugin</packaging>

  <name>[aBundle.name/] Tests</name>

  <build>
  <plugins>
    <plugin>
      <groupId>org.eclipse.tycho</groupId>
      <artifactId>tycho-source-plugin</artifactId>
		<configuration>
          <includes>
            <include>[aBundle.genBundleID().substituteAll('.', '/')/]/tests/suite/[aBundle.name.toUpperFirst()/]TestSuite.class</include>
          </includes>
          <useUIHarness>false</useUIHarness>
          <useUIThread>false</useUIThread>
          <testFailureIgnore>true</testFailureIgnore>
        </configuration>
    </plugin>
  </plugins>
</build>
</project>
[/file]
[/template]